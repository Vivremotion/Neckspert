import"./d_A3s8Hn.js";import{s as X,b as L}from"./DEaT04DK.js";import{i as H}from"./De5FDGKC.js";let R;const z="en",k=["en","fr-fr"];let w=()=>z;const Q=e=>{typeof e=="function"?w=C(e):w=C(()=>e),R!==void 0&&R(w())};function C(e){return()=>{const t=e();if(!A(t))throw new Error("languageTag() didn't return a valid language tag. Check your setLanguageTag call");return t}}const Y=e=>{R=e};function A(e){return k.includes(e)}const q=Object.freeze(Object.defineProperty({__proto__:null,availableLanguageTags:k,isAvailableLanguageTag:A,get languageTag(){return w},onSetLanguageTag:Y,setLanguageTag:Q,sourceLanguageTag:z},Symbol.toStringTag,{value:"Module"})),G=()=>{const e=X;return{page:{subscribe:e.page.subscribe},navigating:{subscribe:e.navigating.subscribe},updated:e.updated}},J={subscribe(e){return G().page.subscribe(e)}};function Z(e,t){if(e==="")return"";const n=new URL(e,t).pathname;return n.endsWith("/")?n.slice(0,-1):n}function v(e,t){const n=te(e),a=V(n,t),[i,s]=ee(a);return[i,s]}const P=(e,t,n)=>[t,e,n??""].filter(a=>a!=="/").join("")||"/";function V(e,t){const n=e.replace(t,"");return n.startsWith("/")?n:`/${n}`}function ee(e){const n=["/.html__data.json","/__data.json"].find(a=>e.endsWith(a));return n?[e.slice(0,-n.length)||"/",n]:[e,void 0]}function te(e){try{return decodeURI(e)}catch{return e}}const ne=e=>({url:t})=>{try{const[n,a]=v(t.pathname,L),i=e.getLanguageFromLocalisedPath(n);if(!i)return t.pathname;const s=e.getCanonicalPath(n,i);return P(s,L,a)}catch{return t.pathname}};function re(e){return`/${e.split("/").filter(Boolean).join("/")}`}function ae(e){const t=e.map(n=>typeof n=="string"?a=>a===n:a=>n.test(a));return n=>t.some(a=>a(re(n)))}const T="rtl",y="ltr";function se(e){try{const t=new Intl.Locale(e);return"textInfo"in t?t.textInfo.direction===T?T:y:t.getTextInfo().direction===T?T:y}catch{return y}}function ce(e){const t=e.map(n=>[n,se(n)]);return Object.fromEntries(t)}const ie=0,D=1,S=2,ue=4,p=0,b=1,E=2;function oe(e){const t=fe(le);return e.sort((n,a)=>{var i,s,c,u,r,o;const f=F(n).map(t),l=F(a).map(t);for(let g=0;g<Math.max(f.length,l.length);g+=1){const m=f[g],_=l[g];if(!m)return-1;if(!_)return 1;for(let x=0;x<Math.max(m.length,_.length);x+=1){const d=m[x],h=_[x];if((d==null?void 0:d[p])||(h==null?void 0:h[p])){if(!d)return-1;if(!h)return 1;const $=((i=m[x+1])==null?void 0:i[b])||((c=(s=f[g+1])==null?void 0:s[0])==null?void 0:c[b]),j=((u=_[x+1])==null?void 0:u[b])||((o=(r=l[g+1])==null?void 0:r[0])==null?void 0:o[b]),K=$&&j,B=$&&!j,W=!$&&j;if((d[p]&&h[p])===S){if(K)continue;if(B)return-1;if(W)return 1}if(d[p]===S)return B?-1:1;if(h[p]===S)return W?1:-1;if(d[E]!==h[E])return(-1)**+d[E];if(d[p]!==h[p])return(-1)**+(d[p]>h[p])}else if((d==null?void 0:d[b])!==(h==null?void 0:h[b]))return ge(d[b],h[b])}}return n<a?1:-1})}function fe(e){const t=new Map;return n=>(t.has(n)||t.set(n,e(n)),t.get(n))}function le(e){const t=[];let n=0;for(;n<=e.length;){const a=e.indexOf("[",n),i=a===-1;if(t.push([ie,e.slice(n,i?void 0:a),!1]),i)break;const s=e[a+1]==="["?D:e[a+1]==="."?S:ue,c=s===D?"]]":"]",u=e.indexOf(c,a);if(u===-1)throw new Error(`Invalid route definition ${e}`);const r=e.slice(a,n=u+c.length);t.push([s,r,r.includes("=")])}return t}const F=e=>e.replace(/\[\[[^\]]+\]\](?!$)/g,"").split("/").filter(Boolean);function ge(e,t){if(e===t)return 0;let n=0;for(;e[n]===t[n];)n++;return e[n]?t[n]?e[n]<t[n]?-1:1:-1:1}const de=/^(\[)?(\.\.\.)?(\w+)(?:=(\w+))?(\])?$/;function he(e){const t=[];return{pattern:e==="/"?/^\/$/:new RegExp(`^${N(e).map(a=>{const i=/^\[\.\.\.(\w+)(?:=(\w+))?\]$/.exec(a);if(i)return t.push({name:i[1],matcher:i[2],optional:!1,rest:!0,chained:!0}),"(?:/(.*))?";const s=/^\[\[(\w+)(?:=(\w+))?\]\]$/.exec(a);if(s)return t.push({name:s[1],matcher:s[2],optional:!0,rest:!1,chained:!0}),"(?:/([^/]+))?";if(!a)return;const c=a.split(/\[(.+?)\](?!\])/);return"/"+c.map((r,o)=>{if(o%2){if(r.startsWith("x+"))return I(String.fromCharCode(parseInt(r.slice(2),16)));if(r.startsWith("u+"))return I(String.fromCharCode(...r.slice(2).split("-").map(x=>parseInt(x,16))));const f=de.exec(r);if(!f)throw new Error(`Invalid param: ${r}`);const[,l,g,m,_]=f;return t.push({name:m,matcher:_,optional:!!l,rest:!!g,chained:g?o===1&&c[0]==="":!1}),g?"(.*?)":l?"([^/]*)?":"([^/]+?)"}return I(r)}).join("")}).join("")}/?$`),params:t}}function me(e,t,n){const a={},i=e.slice(1),s=i.filter(u=>u!==void 0);let c=0;for(const[u,r]of t.entries()){let o=i[u-c];if(r.chained&&r.rest&&c&&(o=i.slice(u-c,u+1).filter(l=>l).join("/"),c=0),o===void 0){r.rest&&(a[r.name]="");continue}if(r.matcher&&!n[r.matcher])return;if((n[r.matcher]??(()=>!0))(o)){a[r.name]=o;const l=t[u+1],g=i[u+1];l&&!l.rest&&l.optional&&g&&r.chained&&(c=0),!l&&!g&&Object.keys(a).length===s.length&&(c=0);continue}if(r.optional&&r.chained){c++;continue}return}if(!c)return a}function I(e){return e.normalize().replace(/[[\]]/g,"\\$&").replace(/%/g,"%25").replace(/\//g,"%2[Ff]").replace(/\?/g,"%3[Ff]").replace(/#/g,"%23").replace(/[.*+?^${}()|\\]/g,"\\$&")}const pe=/\[(\[)?(\.\.\.)?(\w+?)(?:=(\w+))?\]\]?/g;function M(e,t){return"/"+N(e).map(n=>n.replace(pe,(a,i,s,c)=>{const u=t[c];if(!u){if(i||s&&u!==void 0)return"";throw new Error(`Missing parameter '${c}' in route ${e}`)}if(u[0]=="/"||u.endsWith("/"))throw new Error(`Parameter '${c}' in route ${e} cannot start or end with a slash`);return u})).filter(Boolean).join("/")}function U(e,t,n){const a=oe(t);for(const i of a){const s=he(i),c=s.pattern.exec(_e(e));if(!c)continue;const u=me(c,s.params,n);if(u)return{params:u,id:i}}}const _e=e=>e.endsWith("/")?e.slice(0,-1):e,N=e=>e.slice(1).split("/"),xe=(e,t)=>Object.fromEntries(Object.entries(e).map(([n,a])=>[n,typeof a=="object"?a:be(a,t)])),be=(e,t)=>Object.fromEntries(t.map(n=>[n,e({},{languageTag:n})]));function Le(e,t,n,a,i){function s(r){const f=r.split("/")[1];if(e.includes(f)&&(i==="always"||f!==t))return f;if(i==="never")return t}function c(r,o){const f=r.endsWith("/")&&r!=="/";r=f?r.slice(0,-1):r;let l=we(r,o,n,a);return f&&(l+="/"),(i==="always"||o!==t)&&(l=`/${o}${l}`),l}function u(r,o){const f=r.endsWith("/")&&r!=="/";(i==="always"||o!==t)&&(r=r.replace(`/${o}`,"")||"/");const l=f;r=l?r.slice(0,-1):r;let g=Te(r,o,n,a);return l&&(g+="/"),g}return{getLanguageFromLocalisedPath:s,getLocalisedPath:c,getCanonicalPath:u}}function Te(e,t,n,a){for(const[i,s]of Object.entries(n)){if(!(t in s))continue;const c=s[t];if(!c)continue;const u=U(e,[c],a);if(u)return M(i,u.params)}return e}function we(e,t,n,a){const i=U(e,Object.keys(n),a);if(!i)return e;const s=n[i.id];if(!s)return e;const c=s[t];return c?M(c,i.params):e}function ve(e,t){var u;const n=t!=null&&t.pathnames?xe(t.pathnames,e.availableLanguageTags):{},a=(t==null?void 0:t.exclude)??[],i=(t==null?void 0:t.defaultLanguageTag)??e.sourceLanguageTag,s={defaultLanguageTag:i,runtime:e,translations:n,matchers:(t==null?void 0:t.matchers)??{},exclude:ae(a),prefixDefaultLanguage:(t==null?void 0:t.prefixDefaultLanguage)??"never",textDirection:(t==null?void 0:t.textDirection)??ce(e.availableLanguageTags),seo:{noAlternateLinks:((u=t==null?void 0:t.seo)==null?void 0:u.noAlternateLinks)??!1}},c=Le(e.availableLanguageTags,i,s.translations,s.matchers,s.prefixDefaultLanguage);return Object.freeze(n),Object.freeze(s),{config:s,strategy:c,reroute:()=>ne(c),handle:()=>{throw new Error("")},getLanguageFromUrl(r){const o=O(L),[f]=v(r.pathname,o);return s.exclude(f)?s.defaultLanguageTag:c.getLanguageFromLocalisedPath(f)||s.defaultLanguageTag},resolveRoute(r,o=void 0){if(s.exclude(r))return r;const f=O(L),[l,g]=v(r,f);if(o=o??e.languageTag(),!r.startsWith(f))return r;const m=c.getLocalisedPath(l,o);return P(m,f,g)},route(r){const o=O(L),[f,l]=v(r,o),m=c.getLanguageFromLocalisedPath(f)||s.defaultLanguageTag,_=c.getCanonicalPath(f,m);return P(_,o,l)}}}function O(e){return e===""?"":e.startsWith("/")?e:Z(e,new URL(H(J).url))}const Ee=ve(q);export{v as a,Ee as i,Z as n,J as p,P as s};
